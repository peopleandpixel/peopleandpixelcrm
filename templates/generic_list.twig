{% extends 'layout.twig' %}
{% block content %}
<section>
    <div class="section-header">
        <h2>{{ __(schema|capitalize)|e }}</h2>
        <div class="ui secondary menu">
            {% include 'partials/dynamic_search.twig' with { path: path|default(current_path()), q: q|default(''), sort: sort|default('name'), dir: dir|default('asc'), classes: 'ui form inline' } %}
            <div class="right menu">
                <a class="ui green  icon button" href="{{ url('/' ~ schema ~ '/new') }}"><i class="plus icon"></i> {{ __('Add '  ~ type)|e }}</a>
            </div>
        </div>
    </div>

    {% if columns is defined and columns %}
        {% include 'partials/dynamic_list.twig' with {
            title: '',
            items: items|default([]),
            columns: columns,
            actions: { view_url: url('/' ~ schema ~ '/view'), edit_url: url('/' ~ schema ~ '/edit'), delete_url: url('/' ~ schema ~ '/delete'), id_field: 'id' }
        } %}
        <div class="list-footer">
            {% set extra = {q: q|default(''), per: (per|default(10))|int} %}
            {{ paginate(total|default(items|length)|int, page|default(1)|int, per|default(10)|int, path|default(current_path()), extra|merge({sort: sort|default('name'), dir: dir|default('asc')}))|raw }}
        </div>
    {% endif %}
</section>
{% endblock %}